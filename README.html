<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>README.html</title>

</head>

<body>

<h1 id="wordroot">Wordroot</h1>

<p>Teaches the meaning of words and their roots.</p>

<h2 id="deploy">Deploy</h2>

<ul>
<li>Use Docker with Docker Compose</li>
<li>Build the images

<ul>
<li><code>docker-compose build</code></li>
</ul></li>
<li>Start up containers

<ul>
<li><code>docker-compose up -d</code></li>
</ul></li>
<li>For the first deploy, you must initialise the database with some seed data

<ul>
<li><code>docker exec -it wordroot_web bash</code></li>
<li><code>boot reset-and-seed-database!</code></li>
</ul></li>
</ul>

<h2 id="setup">Setup</h2>

<h3 id="dev">Dev</h3>

<ul>
<li>Initialise the database

<ul>
<li><code>initdb -D /usr/local/pgsql/data</code></li>
</ul></li>
<li>Start database server

<ul>
<li><code>pg_ctl -D /usr/local/pgsql/data -l logfile start</code></li>
</ul></li>
<li>Connect to the database

<ul>
<li><code>psql -d postgres</code></li>
</ul></li>
<li>Create the database

<ul>
<li><code>CREATE DATABASE wordroot_database;</code></li>
</ul></li>
<li>Create the role for the database

<ul>
<li><code>CREATE ROLE wordroot_user WITH LOGIN PASSWORD 'weak_password';</code></li>
</ul></li>
<li>Run the migrations and seed the database

<ul>
<li>Dev

<ul>
<li>Start the interactive development application

<ul>
<li><code>boot dev</code></li>
</ul></li>
<li>Connect to the running repl (I use cider-connect in Emacs)</li>
<li>Run the migration and seed tasks

<ul>
<li><code>(wordroot-db/reset-database-and-seed!)</code></li>
</ul></li>
</ul></li>
<li>Production

<ul>
<li><code>boot reset-and-seed-databse!</code></li>
</ul></li>
</ul></li>
</ul>

<h2 id="notes">Notes</h2>

<h3 id="docker">Docker</h3>

<ul>
<li>Delete old Docker images

<ul>
<li><code>docker rmi $(docker images -a -q)</code></li>
</ul></li>
<li>Delete old Docker containers

<ul>
<li><code>docker rm $(docker ps -a -q)</code></li>
</ul></li>
</ul>

<h3 id="boot">Boot</h3>

<p>If Boot noticeably slows down, delete the ~/.boot directory</p>

</body>
</html>
